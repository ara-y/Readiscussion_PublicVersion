<!DOCTYPE html>
<html　xmlns:th="http://www.thmeleaf.org">
<head>
<meta charset="UTF-8">
<link rel="stylesheet" th:href="@{/webjars/bootstrap/4.5.3/css/bootstrap.min.css}">
<title>Insert title here</title>
</head>
<body>


<div class="container-fluid">
<div class="row">


<!-- container-fluid -->
<nav class="navbar navbar-expand-lg navbar-dark bg-dark container-fluid">
<!-- このcontainer-fluidがあるためjustify-content-endは適用可能 -->
	<div class=" container-fluid">

  <a class="navbar-brand" th:href="@{/login}">TODOリスト</a>
  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>


<!-- ナビゲーションバー表示 -->
<div class="collapse navbar-collapse justify-content-end" id="navbarSupportedContent">
<div class="navbar-nav">
<form th:action="@{/login}" class="user" method="post">
<!-- ログインフォームを隠す + ボタンで表示 -->
	<button class="btn btn-primary" type="button" data-toggle="collapse" data-target="#hideLoginForm" aria-expanded="false" aria-controls="loginForm">ログイン画面を開く</button>


		<div class="collapse" id="hideLoginForm">
		<!-- 入力フォームをカスタマイズ　＋モーダルウィンドウ実装 -->
			<div class="form-row justify-content-center">
				<div class="form-group col-4">
					<input  type="email" class="form-control-sm"  name="username" placeholder="メールアドレス">
				</div>
				
				<div class="form-group col-4">
					<input type="password" class="form-control-sm"  name="password" placeholder="パスワード">
				</div>	
			
				<button type="button" class="btn btn-secondary btn-sm col-4" data-toggle="modal" data-target="#Input2FACode">ログイン</button>
			</div>
		</div>
		<div class="modal fade" id="Input2FACode" tabindex="-1" role="dialog" aria-labelledby="2FACodeLabel" aria-hidden="true">
			<div class="modal-dialog" role="document">
				<div class="modal-content">
					<div class="modal-header">
						<h3>ワンタイムパスワードの入力をしてください</h3>
						<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
					</div>
					<div class="modal-body">
							<input type="text" name="code">
							<button>送信する</button>	
					</div>
					<div class="modal-footer">
		        			<button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
		      		</div>
				</div>
			</div>
		</div>
</form>
		<a class="nav-link" th:href="@{/register_account}">登録</a>

</div>
</div>


<!-- - -->
</div>
</nav>

 
</div>
</div>


<div th:if = "${message}">

  [[${message}]]

	<div th:if = "${message} == 登録が完了しましたので、確認メールを送らせていただきました。有効期限は24時間です。" >
		<h3>登録後に確認メールが届かない際は、メール受信設定確認の上、こちらにメールアドレスを入力し再度送信してください。</h3>
		<form th:action="@{/resendConfirmationEmail}" class="forSiteUser" method=post>
			<input type="email" name=mail placeholder="メールアドレスはこちら">
			<button >再送信</button>
		</form>
	</div>
</div>



<div>
<p>日々の内容を記録できるありきたりなツールです。
<p>以下の人たちにおすすめです。
<p>・最近疲れている
<p>・最近疲れている
</div>

<!-- 
<div th:if="${param.error[0].equals('true')}">
	<p>ログインに失敗しました。IDとパスワードを確認してください。
</div>
 -->
 
<div th:if="${session[SPRING_SECURITY_LAST_EXCEPTION]}">
[[${session[SPRING_SECURITY_LAST_EXCEPTION]}]]

</div>

<script th:src="@{/webjars/popper.js/1.16.0/umd/popper.min.js}"></script>
<script th:src="@{/webjars/jquery/3.5.1/jquery.min.js}"></script>
<script th:src="@{/webjars/bootstrap/js/bootstrap.js}"></script>
</body>
</html>